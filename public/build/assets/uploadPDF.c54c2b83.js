import{_ as b}from"./AdminLayout.3fa6628e.js";import{H as h,L as y,u as v,M as w,N as x,c as f,w as k,D as l,o as u,a as t,m as D,b as a,f as c,e as V,a2 as I,t as C}from"./app.b41a95cd.js";import{_ as S}from"./Checkbox.2fed5cc0.js";import{_ as F,a as L}from"./TextInput.eaede94c.js";import{_ as P}from"./InputLabel.0e46b263.js";import{_ as T}from"./PrimaryButton.1d42273e.js";import{s as U}from"./default.css_vue_type_style_index_0_src_true_lang.d60e35a8.js";import{g as M}from"./vform.es.e12cd83f.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import"./DropdownLink.57a586f5.js";const E={props:{Categories:Object},components:{AppLayout:b,Head:h,Link:y,useForm:v,TextInput:F,Checkbox:S,InputError:L,InputLabel:P,PrimaryButton:T,Multiselect:U},data(){return{form:new M({title:"",date:new Date().toISOString().substr(0,10)}),toast:w(),Subcategories:[],progress:0}},methods:{getFormData(s){const e=new FormData;return Object.keys(s).forEach(n=>e.append(n,s[n])),e},loadSubCategories(s){x.post("/admin/load-sub-categories-by-id",{id:s}).then(e=>{this.Subcategories=e.data.Subcategories})},handleFileUpload(){this.form.pdf=this.$refs.filepdf.files[0]},async uploadPdf(){await this.form.post("/admin/storeepaper",{transformRequest:[s=>this.getFormData(s)],onUploadProgress:s=>{let e=parseInt(Math.round(s.loaded/s.total*100));e<=75&&(this.progress=e)}}).then(s=>{console.log(s.data),s.data.status==!0&&(this.progress=100,this.toast.success("Today's news has been upload!",{}))})},progresswidth(s){return"width:"+s+"%;"}}},N={class:"min-h-screen flex flex-col mt-10 items-center pt-6 sm:pt-0 bg-gray-100"},q={class:"w-full sm:max-w-2xl px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg h-screen"},A={class:"grid grid-cols-2 gap-4"},O={class:""},z={class:"col-span-2"},H={action:"/file-upload",class:"dropzone"},j={class:"fallback"},R={key:0,class:"my-3"},G={class:"w-full bg-gray-200 rounded-full dark:bg-gray-700"};function J(s,e,n,K,o,i){const m=l("InputLabel"),p=l("TextInput"),d=l("InputError"),g=l("Multiselect"),_=l("AppLayout");return u(),f(_,{title:"Dashboard"},{default:k(()=>[t("div",null,[t("div",N,[t("div",q,[t("form",{onSubmit:e[5]||(e[5]=D((...r)=>s.submit&&s.submit(...r),["prevent"]))},[t("div",A,[t("div",null,[a(m,{for:"Title",value:"Title"}),a(p,{id:"Title",modelValue:o.form.title,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.title=r),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),a(d,{class:"mt-2",message:o.form.errors.title},null,8,["message"])]),t("div",O,[a(m,{for:"date",value:"Date"}),a(p,{id:"Date",modelValue:o.form.date,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.date=r),type:"date",class:"mt-1 block w-full",required:"",autocomplete:"current-password"},null,8,["modelValue"]),a(d,{class:"mt-2",message:o.form.errors.date},null,8,["message"])]),t("div",null,[a(m,{for:"category",value:"Category"}),a(g,{modelValue:o.form.category,"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.category=r),options:n.Categories,searchable:!0,"close-on-select":!0,"show-labels":!1,placeholder:"Pick a value"},null,8,["modelValue","options"]),o.form.errors.has("category")?(u(),f(d,{key:0,class:"mt-2",message:o.form.errors.get("category")},null,8,["message"])):c("",!0)]),t("div",z,[a(m,{for:"pdf",value:"PDF"}),t("form",H,[t("div",j,[t("input",{name:"file",type:"file",multiple:"",id:"file",ref:"filepdf",onChange:e[3]||(e[3]=r=>i.handleFileUpload())},null,544)])]),a(d,{class:"mt-2",message:o.form.errors.pdf},null,8,["message"])]),t("button",{class:"btn btn-ptimary",onClick:e[4]||(e[4]=(...r)=>i.uploadPdf&&i.uploadPdf(...r))},"Upload")]),o.form.busy?(u(),V("div",R,[t("div",G,[t("div",{class:"bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full",style:I(i.progresswidth(o.progress))},C(o.progress)+"%",5)])])):c("",!0)],32)])])])]),_:1})}const re=B(E,[["render",J]]);export{re as default};
